{% extends 'base.html' %}
{% block title %}Оформление{% endblock %}
{% block content %}
<h1 class="mb-3">Оформление заказа</h1>
{% if items %}
<div class="row row-cols-1 g-2 mb-3">
{% for it in items %}
  <div class="col">
    <div class="card p-2">
      <div class="d-flex justify-content-between">
        <div>
          <h6 class="mb-1">{{ it.product.name }}</h6>
          <small>Количество: {{ it.qty }}</small>
        </div>
        <div>{{ '%.2f'|format(it.product.price * it.qty) }}</div>
      </div>
    </div>
  </div>
{% endfor %}
</div>
<p><strong>Итого: {{ '%.2f'|format(total) }}</strong></p>
<form method="post" enctype="multipart/form-data" class="w-100 w-md-50">
  <div class="mb-3">
    <label class="form-label">Желаемые дата и время доставки</label>
    <input type="datetime-local" name="desired_datetime" class="form-control" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Чек об оплате (опционально)</label>
    <input type="file" name="receipt" class="form-control">
  </div>
  <button type="submit" class="btn btn-primary">Подтвердить</button>
</form>
{% else %}
<p>Корзина пуста</p>
{% endif %}
{% endblock %}
